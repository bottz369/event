import streamlit as st

def render_manual_page():
    st.title("📖 使い方マニュアル")
    st.markdown("---")

    # --- はじめに ---
    st.markdown("""
    ### 📌 はじめに
    このアプリは、ライブイベントの告知に必要な**「タイムテーブル」「出演者一覧（アー写グリッド）」「フライヤー画像」「告知テキスト」**を一元管理・作成するツールです。
    """)

    # --- 第1章 ---
    with st.expander("📂 第1章：素材とデータの準備 (まずはじめに)", expanded=True):
        st.markdown("""
        **1-1. 素材・フォント管理**
        * **ロゴ / 背景画像**: フライヤーで使用する素材をアップロードします。
        * **フォント**: `.ttf` ファイル等を登録します。これらはクラウドに保存され、どの端末でも使用できます。

        **1-2. アーティスト管理 (重要)**
        * 出演者の名前と画像を登録します。
        * **【重要】画像の調整**: 登録後に「編集」ボタンを押し、**ズーム**や**位置(XY)**を調整してください。ここでの設定がすべての画像生成に反映されます。
        """)

    # --- 第2章 ---
    with st.expander("🚀 第2章：プロジェクトの立ち上げ", expanded=True):
        st.markdown("""
        **メニュー「プロジェクト」** から作業を開始します。
        
        1. **新規作成**: 「➕ 新規プロジェクト作成」を選択し、イベント名や日付を入力します。
        2. **ワークスペース**: プロジェクトを作成すると、編集画面（ワークスペース）に移動します。
        """)

    # --- ワークスペースのタブ ---
    st.markdown("### 🛠️ ワークスペースでの作業フロー")
    
    tab1, tab2, tab3, tab4 = st.tabs(["📝 概要", "⏱️ タイムテーブル", "🖼️ グリッド", "📑 フライヤー"])

    with tab1:
        st.markdown("""
        #### 📝 イベント概要
        * **OPEN/START**: 時間を設定します。「※調整中」も可能です。
        * **チケット**: 券種や備考を追加します。
        * **告知テキスト**: 入力情報とTT情報を元に、SNS用の文章が**自動生成**されます。
        """)

    with tab2:
        st.markdown("""
        #### ⏱️ タイムテーブル作成
        * **リスト作成**: アーティストを手動、またはCSVで一括追加します。
        * **編集**: 持ち時間や転換、並行物販の情報を入力します。
        * **再計算**: 時間を変更したら「再計算」ボタンでスケジュールを更新します。
        * **画像生成**: フォントを選んで画像をプレビュー・保存します。
        """)

    with tab3:
        st.markdown("""
        #### 🖼️ アー写グリッド作成
        * **連携**: TTの出演者が自動で表示されます。
        * **レイアウト**: 行数や枚数（例: `5,5,5`）を指定し、ドラッグ&ドロップで並び替えます。
        * **モード**: 写真サイズを揃える「レンガ」か、高さを揃える「両端揃え」か選べます。
        """)

    with tab4:
        st.markdown("""
        #### 📑 フライヤーセット作成 (仕上げ)
        * **素材合体**: 背景、ロゴ、TTまたはグリッド画像を組み合わせます。
        * **Click & Move**: プレビュー画像をクリックすると、その位置に対象（文字やロゴ）が移動します。
        * **スタイル**: 文字色、フォント、**ドロップシャドウ（影）**を細かく設定できます。
        * **テンプレート**: 設定を保存し、次回ワンクリックで呼び出せます。
        * **保存**: 画像だけでなく、素材一式をZIPでダウンロードできます。
        """)

    # --- 第3章 ---
    with st.expander("📤 第3章：データの書き出し・削除", expanded=False):
        st.markdown("""
        **メニュー「プロジェクト」** に戻り操作します。
        * **PDF出力**: 概要書や業務用TTをダウンロードできます。
        * **削除**: 不要なプロジェクトを削除できます。
        """)
